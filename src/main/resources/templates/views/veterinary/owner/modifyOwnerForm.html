<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" , xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" th:content="#{owner.formcontent}"/>
    <link rel="icon" th:href="@{/icons/logo.svg}" type="image/x-icon"/>
    <link rel="apple-touch-icon" th:href="@{/icons/logo.svg}" type="image/x-icon"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"/>
    <link rel="stylesheet" th:href="@{/styles/global.css}"/>
    <link rel="stylesheet" th:href="@{/styles/login.css}"/>
    <link rel="stylesheet" th:href="@{/styles/sign-up.css}"/>
    <title th:if="${action == 'modify'}" th:text="#{ownerformregister.titlemodify}"></title>
    <title th:if="${action != 'modify'}" th:text="#{ownerformregister.titleregister}"></title>
</head>

<body class="bg-main-color container-fluid body-container">
<main class="container justify-content-center align-items-center">
    <div class="card">
        <div class="card-title pt-4 text-center">
            <h2 class="main-color" th:if="${action == 'modify'}" th:text="#{ownerformregister.title2modify}"></h2>
            <h2 class="main-color" th:if="${action != 'modify'}" th:text="#{ownerformregister.title2register}"></h2>
        </div>
        <div class="card-body px-5">
            <form method="post" th:action="${action == 'modify'} ? @{/owner/modify} : @{/owner/create}"
                  th:object="${newOwner}" enctype="multipart/form-data">
                <div class="row row-cols-md-3 px-5 mb-3"> <!-- Fila General -->
                    <div class="col col-xxl-5"> <!-- Columna 1 -->
                        <div class="row row-cols-1"> <!-- Fila 1 -->
                            <label for="username" class="col-12 ms-4" th:text="#{ownerformregister.username}"></label>
                        </div>
                        <div class="col-12 mb-3 mb-xxl-4">
                            <input type="text" name="username" id="username" th:field="*{username}"
                                   th:placeholder="#{ownerformregister.username.placeholder}"
                                   th:classappend="${#fields.hasErrors('username')} ? 'is-invalid' : ''"
                                   th:attr="data-bs-toggle=${#fields.hasErrors('username') ? 'tooltip' : ''}, data-bs-placement='right', data-bs-custom-class='alert-tooltip', data-bs-title=${#fields.hasErrors('username') ? #fields.errors('username')[0] : ''}"
                                   />
                        </div>
                        <div class="row row-cols-1"> <!-- Fila 2 -->
                            <label for="name" class="col-12 ms-4" th:text="#{ownerformregister.name}"></label>
                        </div>
                        <div class="col-12 mb-3 mb-xxl-4">
                            <input type="text" id="name" name="name" th:field="*{name}"
                                   th:placeholder="#{ownerformregister.name.placeholder}"
                                   th:classappend="${#fields.hasErrors('name')} ? 'is-invalid' : ''"
                                   th:attr="data-bs-toggle=${#fields.hasErrors('name') ? 'tooltip' : ''}, data-bs-placement='right', data-bs-custom-class='alert-tooltip', data-bs-title=#{ownerformregister.error.name}"/>
                        </div>
                        <div class="row row-cols-1"> <!-- Fila 3 -->
                            <label for="password" class="col-12 ms-4" th:text="#{ownerformregister.password}"></label>
                        </div>
                        <div class="col-12 mb-3 mb-xxl-4">
                            <input type="password" id="password" name="password" th:field="*{password}"
                                   th:placeholder="#{ownerformregister.password.placeholder}"
                                   th:classappend="${#fields.hasErrors('password')} ? 'is-invalid' : ''"
                                   th:attr="data-bs-toggle=${#fields.hasErrors('password') ? 'tooltip' : ''}, data-bs-placement='right', data-bs-custom-class='alert-tooltip', data-bs-title=#{ownerformregister.error.password}"/>
                        </div>
                    </div>
                    <div class="col col-xxl-5"> <!-- Columna 2 -->
                        <div class="row row-cols-1"> <!-- Fila 1 -->
                            <label for="email" class="col-12 ms-4" th:text="#{ownerformregister.email}" ></label>
                        </div>
                        <input type="email" name="email" class="mb-xxl-4" th:field="*{email}"
                               th:placeholder="#{ownerformregister.email.placeholder}"
                               th:classappend="${#fields.hasErrors('email')} ? 'is-invalid' : ''"
                               th:attr="data-bs-toggle=${#fields.hasErrors('email') ? 'tooltip' : ''}, data-bs-placement='right', data-bs-custom-class='alert-tooltip', data-bs-title=#{ownerformregister.error.email}"/>
                        <div class="row row-cols-1"> <!-- Fila 2 -->
                            <label for="address" class="col-12 ms-4" th:text="#{ownerformregister.address}"></label>
                        </div>
                        <input type="text" name="address" class="mb-xxl-4" th:field="*{address}"
                               th:placeholder="#{ownerformregister.address.placeholder}"
                               th:classappend="${#fields.hasErrors('address')} ? 'is-invalid' : ''"
                               th:attr="data-bs-toggle=${#fields.hasErrors('address') ? 'tooltip' : ''}, data-bs-placement='right', data-bs-custom-class='alert-tooltip', data-bs-title=#{ownerformregister.error.address}"/>
                        <div class="row row-cols-1"> <!-- Fila 3 -->
                            <label for="address" class="col-12 ms-4" th:text="#{ownerformregister.zipcode}"></label>
                        </div>
                        <input type="text" name="address" class="mb-xxl-4" th:field="*{zipCode}"
                               th:placeholder="#{ownerformregister.zipcode.placeholder}"
                               th:classappend="${#fields.hasErrors('zipCode')} ? 'is-invalid' : ''"
                               th:attr="data-bs-toggle=${#fields.hasErrors('zipCode') ? 'tooltip' : ''}, data-bs-placement='right', data-bs-custom-class='alert-tooltip', data-bs-title=#{ownerformregister.error.zipCode}"/>
                        <div class="row row-cols-1">
                            <label for="phone" class="col-12 ms-4" th:text="#{ownerformregister.zipcode}"></label>
                        </div>
                        <input type="text" name="address" class="mb-xxl-4" th:field="*{phone}"
                               th:placeholder="#{ownerformregister.phone.placeholder}"
                               th:classappend="${#fields.hasErrors('phone')} ? 'is-invalid' : ''"
                               th:attr="data-bs-toggle=${#fields.hasErrors('phone') ? 'tooltip' : ''}, data-bs-placement='right', data-bs-custom-class='alert-tooltip', data-bs-title=#{ownerformregister.error.phone}"/>
                    </div>
                    <div class="col col-xxl-2 text-center"> <!-- Columna 3 -->
                        <label for="imgUpload" class="upload-text mb-3" th:text="#{ownerformregister.image}"></label>
                        <label for="imgUpload" class="lbl-upload-button">
                            <img th:if="${isLoggedIn}" id="preview"
                                 th:src="${#strings.isEmpty(user.imgURL) ? '/images/upload-image.svg' : user.imgURL}"
                                 class="upload-button"
                                 alt="Oprima aquí para subir su imágen de perfil">
                            <img th:if="${!isLoggedIn}" id="preview" th:src="@{/images/upload-image.svg}"
                                 class="upload-button"
                                 alt="Oprima aquí para subir su imágen de perfil">
                        </label>
                        <input class="input-img" id="imgUpload" type="file" name="file" accept=".png, .jpg, .jpeg"
                               onchange="previewImage(event)">
                        <span id="fileName" class="fileName" th:text="#{no.selection}"></span>
                    </div>
                </div>
                <div class="row alig-items-center justify-content-center text-center mb-3">
                    <span th:if="${action == 'modify'}"><input type="submit" th:value="#{form.update}"
                                 class="button-register bg-main-color"></span>
                    <span th:if="${action != 'modify'}"><input type="submit" th:value="#{form.register}"
                                                               class="button-register bg-main-color"></span>
                </div>
            </form>
        </div>
    </div>
    <div class="row align-items-end justify-content-end">
        <img class="absolute-image col-12 col-xxl-5" th:src="@{/images/baby-perro.svg}" alt="Un bonito perrito"/>
    </div>
</main>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
<script th:src="@{/scripts/form-image.js}"></script>
<script>
    const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
    const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
</script>
</body>

</html>